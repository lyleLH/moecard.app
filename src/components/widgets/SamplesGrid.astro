---
import { Image } from 'astro:assets';
import Twemoji from '../common/Twemoji.astro';
import type { ImageMetadata } from 'astro';

interface Props {
  samples: {
    image: ImageMetadata;
    title: string;
  }[];
}

const { samples } = Astro.props;
const ITEMS_PER_PAGE = 6;
const totalPages = Math.ceil(samples.length / ITEMS_PER_PAGE);
---

<div class="relative" x-data="{ currentPage: 1 }">
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 sm:gap-8">
    {samples.map((sample, index) => {
      const page = Math.floor(index / ITEMS_PER_PAGE) + 1;
      return (
        <div
          class="group relative overflow-hidden rounded-3xl bg-white dark:bg-slate-900 shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-1 aspect-[4/5]"
          x-show={`${page} === currentPage`}
          x-cloak
        >
          <Image
            src={sample.image}
            alt={sample.title}
            width={800}
            height={1000}
            format="webp"
            quality={90}
            class="h-full w-full object-contain p-4"
            loading="lazy"
          />
        </div>
      );
    })}
  </div>

  <div class="mt-8 flex justify-center gap-4 items-center">
    <button 
      class="p-2 rounded-full bg-white dark:bg-slate-900 shadow-md hover:shadow-lg transition-all disabled:opacity-50"
      @click="currentPage = Math.max(1, currentPage - 1)"
      :disabled="currentPage === 1"
    >
      <Twemoji emoji="⬅️" size="md" />
    </button>
    
    <span class="text-lg font-medium">
      <span x-text="currentPage"></span> / {totalPages}
    </span>
    
    <button 
      class="p-2 rounded-full bg-white dark:bg-slate-900 shadow-md hover:shadow-lg transition-all disabled:opacity-50"
      @click={`currentPage = Math.min(${totalPages}, currentPage + 1)`}
      :disabled={`currentPage === ${totalPages}`}
    >
      <Twemoji emoji="➡️" size="md" />
    </button>
  </div>
</div>

<style>
  [x-cloak] {
    display: none !important;
  }
</style> 